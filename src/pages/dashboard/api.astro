---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
---

<Layout title="API Keys - Xana Connector">
  <Header />

  <main class="dashboard">
    <div class="container">
      <div class="dashboard-header">
        <div class="breadcrumb">
          <a href="/">Inicio</a>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"/>
          </svg>
          <span>API Keys</span>
        </div>
        <h1>Claves de API</h1>
        <p>Gestiona tus credenciales para conectar con la API de Xana Connector</p>
      </div>

      <!-- API Key Principal -->
      <div class="api-section">
        <div class="section-title">
          <h2>API Key</h2>
          <span class="badge badge-success">Activa</span>
        </div>

        <div class="api-card main">
          <div class="api-card-header">
            <div class="api-icon">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3m-3.5 3.5L19 4"/>
              </svg>
            </div>
            <div class="api-info">
              <h3>Clave de API Principal</h3>
              <p>Usa esta clave para autenticar las solicitudes a la API de Xana</p>
            </div>
          </div>

          <div class="api-key-display">
            <div class="key-field">
              <code id="api-key" class="key-value">xana_live_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6</code>
              <div class="key-actions">
                <button class="btn-icon" id="toggle-key" title="Mostrar/Ocultar">
                  <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                  <svg class="eye-off-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                    <line x1="1" y1="1" x2="23" y2="23"/>
                  </svg>
                </button>
                <button class="btn-icon" id="copy-key" title="Copiar al portapapeles">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                  </svg>
                </button>
              </div>
            </div>
            <p class="key-hint">Mantén esta clave segura y no la compartas públicamente</p>
          </div>

          <div class="api-meta">
            <div class="meta-item">
              <span class="meta-label">Creada</span>
              <span class="meta-value">15 de Diciembre, 2024</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">Último uso</span>
              <span class="meta-value">Hace 2 horas</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">Solicitudes (30 días)</span>
              <span class="meta-value">12,458</span>
            </div>
          </div>
        </div>
      </div>

      <!-- API Secret -->
      <div class="api-section">
        <div class="section-title">
          <h2>API Secret</h2>
          <span class="badge badge-primary">Requerido para firmar</span>
        </div>

        <div class="api-card">
          <div class="api-card-header">
            <div class="api-icon secret">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
            </div>
            <div class="api-info">
              <h3>Clave Secreta</h3>
              <p>Usa esta clave junto con la API Key para firmar las solicitudes</p>
            </div>
          </div>

          <div class="api-key-display">
            <div class="key-field">
              <code id="api-secret" class="key-value masked">••••••••••••••••••••••••••••••••••••</code>
              <div class="key-actions">
                <button class="btn-icon" id="toggle-secret" title="Mostrar/Ocultar">
                  <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                  <svg class="eye-off-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                    <line x1="1" y1="1" x2="23" y2="23"/>
                  </svg>
                </button>
                <button class="btn-icon" id="copy-secret" title="Copiar al portapapeles">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Store ID -->
      <div class="api-section">
        <div class="section-title">
          <h2>Store ID</h2>
        </div>

        <div class="api-card">
          <div class="api-card-header">
            <div class="api-icon store">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
              </svg>
            </div>
            <div class="api-info">
              <h3>Identificador de Tienda</h3>
              <p>ID único que identifica tu tienda en Xana Product Manager</p>
            </div>
          </div>

          <div class="api-key-display">
            <div class="key-field">
              <code id="store-id" class="key-value">store_xn_7f8g9h0i1j2k3l4m</code>
              <div class="key-actions">
                <button class="btn-icon" id="copy-store" title="Copiar al portapapeles">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Regenerar claves -->
      <div class="api-section">
        <div class="section-title">
          <h2>Regenerar Claves</h2>
        </div>

        <div class="warning-card">
          <div class="warning-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
              <line x1="12" y1="9" x2="12" y2="13"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
          </div>
          <div class="warning-content">
            <h4>Precaución al regenerar</h4>
            <p>Al regenerar tus claves de API, las claves actuales dejarán de funcionar inmediatamente. Deberás actualizar las credenciales en todas las integraciones que las utilicen.</p>
          </div>
          <button class="btn btn-danger" id="regenerate-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"/>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
            </svg>
            Regenerar claves
          </button>
        </div>
      </div>

      <!-- Guía rápida -->
      <div class="api-section">
        <div class="section-title">
          <h2>Guía Rápida de Uso</h2>
        </div>

        <div class="guide-card">
          <div class="guide-step">
            <span class="step-number">1</span>
            <div class="step-content">
              <h4>Configura wp-config.php</h4>
              <p>Añade tus credenciales al archivo de configuración de WordPress:</p>
              <div class="code-block">
                <pre is:raw><code>define('XANA_API_KEY', 'tu-api-key');
define('XANA_API_SECRET', 'tu-api-secret');
define('XANA_STORE_ID', 'tu-store-id');</code></pre>
                <button class="copy-code-btn" data-code="config">Copiar</button>
              </div>
            </div>
          </div>

          <div class="guide-step">
            <span class="step-number">2</span>
            <div class="step-content">
              <h4>Autenticación de solicitudes</h4>
              <p>Incluye los headers de autenticación en cada solicitud a la API:</p>
              <div class="code-block">
                <pre><code>X-Xana-API-Key: tu-api-key
X-Xana-Signature: sha256-hmac-signature
X-Xana-Timestamp: unix-timestamp</code></pre>
                <button class="copy-code-btn" data-code="headers">Copiar</button>
              </div>
            </div>
          </div>

          <div class="guide-step">
            <span class="step-number">3</span>
            <div class="step-content">
              <h4>Genera la firma HMAC</h4>
              <p>La firma se genera con tu API Secret usando HMAC-SHA256:</p>
              <div class="code-block">
                <pre is:raw><code>$timestamp = time();
$message = $timestamp . $requestMethod . $requestPath;
$signature = hash_hmac('sha256', $message, $apiSecret);</code></pre>
                <button class="copy-code-btn" data-code="signature">Copiar</button>
              </div>
            </div>
          </div>
        </div>

        <div class="guide-footer">
          <a href="/docs#authentication" class="btn btn-secondary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10 9 9 9 8 9"/>
            </svg>
            Ver documentación completa
          </a>
        </div>
      </div>

      <!-- Estadísticas de uso -->
      <div class="api-section">
        <div class="section-title">
          <h2>Estadísticas de Uso</h2>
          <span class="badge">Últimos 30 días</span>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon requests">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
              </svg>
            </div>
            <div class="stat-info">
              <span class="stat-value">12,458</span>
              <span class="stat-label">Solicitudes totales</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon success">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
              </svg>
            </div>
            <div class="stat-info">
              <span class="stat-value">99.2%</span>
              <span class="stat-label">Tasa de éxito</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon products">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                <line x1="3" y1="6" x2="21" y2="6"/>
                <path d="M16 10a4 4 0 0 1-8 0"/>
              </svg>
            </div>
            <div class="stat-info">
              <span class="stat-value">1,847</span>
              <span class="stat-label">Productos sincronizados</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon latency">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
            </div>
            <div class="stat-info">
              <span class="stat-value">142ms</span>
              <span class="stat-label">Latencia promedio</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Modal de confirmación -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal">
      <div class="modal-icon">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
          <line x1="12" y1="9" x2="12" y2="13"/>
          <line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
      </div>
      <h3>¿Regenerar claves de API?</h3>
      <p>Esta acción no se puede deshacer. Las claves actuales dejarán de funcionar inmediatamente.</p>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="modal-cancel">Cancelar</button>
        <button class="btn btn-danger" id="modal-confirm">Sí, regenerar</button>
      </div>
    </div>
  </div>

  <!-- Toast notification -->
  <div class="toast" id="toast">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
      <polyline points="22 4 12 14.01 9 11.01"/>
    </svg>
    <span id="toast-message">Copiado al portapapeles</span>
  </div>
</Layout>

<script>
  // Check if logged in
  const isLoggedIn = document.cookie.includes('xana_logged_in=true');
  if (!isLoggedIn) {
    window.location.href = '/login';
  }

  // Real values (in production these would come from backend)
  const apiKey = 'xana_live_a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6';
  const apiSecret = 'xana_secret_z9y8x7w6v5u4t3s2r1q0p9o8n7m6l5k4';
  const storeId = 'store_xn_7f8g9h0i1j2k3l4m';

  // Toggle API Key visibility
  const apiKeyEl = document.getElementById('api-key');
  const toggleKeyBtn = document.getElementById('toggle-key');
  let keyVisible = true;

  toggleKeyBtn?.addEventListener('click', () => {
    keyVisible = !keyVisible;
    if (apiKeyEl) {
      apiKeyEl.textContent = keyVisible ? apiKey : '••••••••••••••••••••••••••••••••••••';
      apiKeyEl.classList.toggle('masked', !keyVisible);
    }
    toggleKeyBtn.querySelector('.eye-icon')?.classList.toggle('hidden', !keyVisible);
    toggleKeyBtn.querySelector('.eye-off-icon')?.classList.toggle('hidden', keyVisible);
  });

  // Toggle API Secret visibility
  const apiSecretEl = document.getElementById('api-secret');
  const toggleSecretBtn = document.getElementById('toggle-secret');
  let secretVisible = false;

  toggleSecretBtn?.addEventListener('click', () => {
    secretVisible = !secretVisible;
    if (apiSecretEl) {
      apiSecretEl.textContent = secretVisible ? apiSecret : '••••••••••••••••••••••••••••••••••••';
      apiSecretEl.classList.toggle('masked', !secretVisible);
    }
    toggleSecretBtn.querySelector('.eye-icon')?.classList.toggle('hidden', secretVisible);
    toggleSecretBtn.querySelector('.eye-off-icon')?.classList.toggle('hidden', !secretVisible);
  });

  // Copy functions
  const showToast = (message: string) => {
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toast-message');
    if (toast && toastMessage) {
      toastMessage.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }
  };

  document.getElementById('copy-key')?.addEventListener('click', () => {
    navigator.clipboard.writeText(apiKey);
    showToast('API Key copiada');
  });

  document.getElementById('copy-secret')?.addEventListener('click', () => {
    navigator.clipboard.writeText(apiSecret);
    showToast('API Secret copiada');
  });

  document.getElementById('copy-store')?.addEventListener('click', () => {
    navigator.clipboard.writeText(storeId);
    showToast('Store ID copiado');
  });

  // Copy code blocks
  document.querySelectorAll('.copy-code-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const codeBlock = btn.closest('.code-block')?.querySelector('code');
      if (codeBlock) {
        navigator.clipboard.writeText(codeBlock.textContent || '');
        showToast('Código copiado');
      }
    });
  });

  // Modal functionality
  const modalOverlay = document.getElementById('modal-overlay');
  const regenerateBtn = document.getElementById('regenerate-btn');
  const modalCancel = document.getElementById('modal-cancel');
  const modalConfirm = document.getElementById('modal-confirm');

  regenerateBtn?.addEventListener('click', () => {
    modalOverlay?.classList.add('show');
  });

  modalCancel?.addEventListener('click', () => {
    modalOverlay?.classList.remove('show');
  });

  modalOverlay?.addEventListener('click', (e) => {
    if (e.target === modalOverlay) {
      modalOverlay.classList.remove('show');
    }
  });

  modalConfirm?.addEventListener('click', () => {
    modalOverlay?.classList.remove('show');
    showToast('Claves regeneradas correctamente');
    // In production, this would call the API to regenerate keys
  });
</script>

<style>
  @import '../../styles/global.css';

  .dashboard {
    padding-top: calc(72px + var(--space-8));
    padding-bottom: var(--space-16);
    min-height: 100vh;
    background: var(--gray-50);
  }

  .dashboard-header {
    margin-bottom: var(--space-10);
  }

  .breadcrumb {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: 0.875rem;
    color: var(--gray-500);
    margin-bottom: var(--space-4);
  }

  .breadcrumb a {
    color: var(--primary-purple);
  }

  .breadcrumb a:hover {
    text-decoration: underline;
  }

  .dashboard-header h1 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--gray-900);
    margin-bottom: var(--space-2);
  }

  .dashboard-header p {
    color: var(--gray-600);
    font-size: 1.0625rem;
  }

  .api-section {
    margin-bottom: var(--space-8);
  }

  .section-title {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-4);
  }

  .section-title h2 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--gray-900);
  }

  /* API Cards */
  .api-card {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    border: 2px solid var(--gray-200);
  }

  .api-card.main {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.03) 0%, rgba(124, 58, 237, 0.03) 100%);
    border-color: rgba(124, 58, 237, 0.2);
  }

  .api-card-header {
    display: flex;
    align-items: flex-start;
    gap: var(--space-4);
    margin-bottom: var(--space-6);
  }

  .api-icon {
    width: 56px;
    height: 56px;
    border-radius: var(--radius-lg);
    background: var(--gradient-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    flex-shrink: 0;
  }

  .api-icon.secret {
    background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
  }

  .api-icon.store {
    background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
  }

  .api-info h3 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--gray-900);
    margin-bottom: var(--space-1);
  }

  .api-info p {
    color: var(--gray-600);
    font-size: 0.9375rem;
  }

  /* Key Display */
  .api-key-display {
    margin-bottom: var(--space-4);
  }

  .key-field {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    background: var(--gray-900);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
  }

  .key-value {
    flex: 1;
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
    font-size: 0.9375rem;
    color: #a5f3fc;
    background: none;
    letter-spacing: 0.02em;
    word-break: break-all;
  }

  .key-value.masked {
    color: var(--gray-500);
    letter-spacing: 0.1em;
  }

  .key-actions {
    display: flex;
    gap: var(--space-2);
    flex-shrink: 0;
  }

  .btn-icon {
    width: 36px;
    height: 36px;
    border-radius: var(--radius-md);
    background: rgba(255, 255, 255, 0.1);
    color: var(--gray-400);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .btn-icon:hover {
    background: rgba(255, 255, 255, 0.2);
    color: white;
  }

  .btn-icon .hidden {
    display: none;
  }

  .key-hint {
    font-size: 0.8125rem;
    color: var(--gray-500);
    margin-top: var(--space-2);
  }

  /* API Meta */
  .api-meta {
    display: flex;
    gap: var(--space-8);
    padding-top: var(--space-4);
    border-top: 1px solid var(--gray-200);
  }

  .meta-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  .meta-label {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--gray-500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .meta-value {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--gray-900);
  }

  /* Warning Card */
  .warning-card {
    background: rgba(245, 158, 11, 0.05);
    border: 2px solid rgba(245, 158, 11, 0.2);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    display: flex;
    align-items: center;
    gap: var(--space-4);
  }

  .warning-icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-lg);
    background: rgba(245, 158, 11, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--warning);
    flex-shrink: 0;
  }

  .warning-content {
    flex: 1;
  }

  .warning-content h4 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--gray-900);
    margin-bottom: var(--space-1);
  }

  .warning-content p {
    color: var(--gray-600);
    font-size: 0.9375rem;
  }

  .btn-danger {
    background: var(--error);
    color: white;
    padding: var(--space-3) var(--space-5);
    border-radius: var(--radius-lg);
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: var(--space-2);
    transition: all 0.2s;
    flex-shrink: 0;
  }

  .btn-danger:hover {
    background: #dc2626;
    transform: translateY(-1px);
  }

  /* Guide Card */
  .guide-card {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
    border: 2px solid var(--gray-200);
  }

  .guide-step {
    display: flex;
    gap: var(--space-4);
    padding: var(--space-4) 0;
    border-bottom: 1px solid var(--gray-100);
  }

  .guide-step:last-child {
    border-bottom: none;
  }

  .step-number {
    width: 32px;
    height: 32px;
    border-radius: var(--radius-full);
    background: var(--gradient-primary);
    color: white;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .step-content {
    flex: 1;
  }

  .step-content h4 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--gray-900);
    margin-bottom: var(--space-2);
  }

  .step-content p {
    color: var(--gray-600);
    font-size: 0.9375rem;
    margin-bottom: var(--space-3);
  }

  .code-block {
    position: relative;
    background: var(--gray-900);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    overflow-x: auto;
  }

  .code-block pre {
    margin: 0;
  }

  .code-block code {
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
    font-size: 0.8125rem;
    color: #a5f3fc;
    line-height: 1.6;
  }

  .copy-code-btn {
    position: absolute;
    top: var(--space-2);
    right: var(--space-2);
    padding: var(--space-1) var(--space-3);
    font-size: 0.75rem;
    background: rgba(255, 255, 255, 0.1);
    color: var(--gray-400);
    border-radius: var(--radius-sm);
    transition: all 0.2s;
  }

  .copy-code-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    color: white;
  }

  .guide-footer {
    margin-top: var(--space-6);
    text-align: center;
  }

  /* Stats Grid */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-4);
  }

  .stat-card {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-5);
    border: 2px solid var(--gray-200);
    display: flex;
    align-items: center;
    gap: var(--space-4);
  }

  .stat-icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .stat-icon.requests {
    background: rgba(124, 58, 237, 0.1);
    color: var(--primary-purple);
  }

  .stat-icon.success {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
  }

  .stat-icon.products {
    background: rgba(37, 99, 235, 0.1);
    color: var(--primary-blue);
  }

  .stat-icon.latency {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
  }

  .stat-info {
    display: flex;
    flex-direction: column;
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--gray-900);
  }

  .stat-label {
    font-size: 0.8125rem;
    color: var(--gray-500);
  }

  /* Modal */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
  }

  .modal-overlay.show {
    opacity: 1;
    visibility: visible;
  }

  .modal {
    background: var(--white);
    border-radius: var(--radius-xl);
    padding: var(--space-8);
    max-width: 420px;
    text-align: center;
    transform: scale(0.9);
    transition: transform 0.3s;
  }

  .modal-overlay.show .modal {
    transform: scale(1);
  }

  .modal-icon {
    width: 72px;
    height: 72px;
    border-radius: var(--radius-full);
    background: rgba(239, 68, 68, 0.1);
    color: var(--error);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto var(--space-4);
  }

  .modal h3 {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--gray-900);
    margin-bottom: var(--space-2);
  }

  .modal p {
    color: var(--gray-600);
    margin-bottom: var(--space-6);
  }

  .modal-actions {
    display: flex;
    gap: var(--space-3);
    justify-content: center;
  }

  .modal-actions .btn {
    min-width: 120px;
  }

  /* Toast */
  .toast {
    position: fixed;
    bottom: var(--space-6);
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--gray-900);
    color: white;
    padding: var(--space-3) var(--space-5);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    gap: var(--space-2);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
    z-index: 10000;
  }

  .toast.show {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
  }

  .toast svg {
    color: var(--success);
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 768px) {
    .api-card-header {
      flex-direction: column;
    }

    .api-meta {
      flex-direction: column;
      gap: var(--space-3);
    }

    .warning-card {
      flex-direction: column;
      text-align: center;
    }

    .btn-danger {
      width: 100%;
      justify-content: center;
    }

    .stats-grid {
      grid-template-columns: 1fr;
    }

    .guide-step {
      flex-direction: column;
    }

    .modal-actions {
      flex-direction: column;
    }

    .modal-actions .btn {
      width: 100%;
    }
  }
</style>